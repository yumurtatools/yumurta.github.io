<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>City A & B â€“ Relative Positions (hh:mm:ss input)</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;500;600;700&family=Inter:wght@400;500;600&display=swap">
  <style>
    :root {
      --marble:      #f8f1e9;
      --marble-dark:  #e8d9c5;
      --gold:         #d4a017;
      --gold-dark:    #b8860b;
      --night:        #0d1b2a;
      --deep-blue:    #1b263b;
      --accent:       #e9c46a;
      --text:         #2d1e12;
      --text-light:   #5c4033;
      --border:       #c9a87c;
      --shadow:       rgba(0,0,0,0.25);
      --egg-glow:     rgba(212,160,23,0.4);
    }

    * { box-sizing: border-box; }

    body {
      font-family: 'Inter', system-ui, sans-serif;
      background: linear-gradient(180deg, var(--night) 0%, #1a2a44 40%, #2a3b5a 100%);
      color: var(--text);
      margin: 0;
      padding: 40px 16px;
      min-height: 100vh;
      background-image:
        radial-gradient(circle at 15% 20%, rgba(233,196,106,0.08) 0%, transparent 8%),
        radial-gradient(circle at 85% 75%, rgba(212,160,23,0.06) 0%, transparent 10%);
    }

    .container {
      max-width: 680px;
      margin: 0 auto;
      background: var(--marble);
      border-radius: 16px;
      overflow: hidden;
      border: 2px solid var(--border);
      box-shadow: 0 12px 48px var(--shadow),
                  inset 0 0 0 1px rgba(212,160,23,0.15);
      position: relative;
    }

    /* Greek key / meander subtle border pattern */
    .container::before {
      content: "";
      position: absolute;
      inset: -2px;
      border: 3px solid transparent;
      border-image: repeating-linear-gradient(45deg, var(--gold), var(--gold) 8px, transparent 8px, transparent 16px) 1;
      pointer-events: none;
      z-index: 1;
      border-radius: 18px;
    }

    header {
      background: linear-gradient(135deg, #2a1e0f 0%, #3d2a12 100%);
      padding: 36px 32px 28px;
      text-align: center;
      position: relative;
      overflow: hidden;
    }

    header::before {
      content: "âœ§";
      position: absolute;
      top: 12px; left: 20px;
      font-size: 2.8rem;
      color: var(--gold);
      opacity: 0.25;
      transform: rotate(-15deg);
    }

    header::after {
      content: "âœ¦";
      position: absolute;
      bottom: 10px; right: 24px;
      font-size: 2.4rem;
      color: var(--accent);
      opacity: 0.3;
    }

    h2 {
      margin: 0;
      font-family: 'Cinzel', serif;
      font-weight: 600;
      font-size: 2.1rem;
      color: var(--gold);
      letter-spacing: 0.04em;
      text-shadow: 0 2px 8px rgba(0,0,0,0.6);
    }

    .content {
      padding: 36px 32px 40px;
      position: relative;
    }

    /* Decorative fantasy eggs */
    .egg-deco {
      position: absolute;
      font-size: 2.4rem;
      opacity: 0.18;
      pointer-events: none;
      user-select: none;
    }
    #egg1 { top: -10px; left: 20px; transform: rotate(-20deg); }
    #egg2 { bottom: 60px; right: 30px; transform: rotate(15deg); font-size: 2.8rem; }
    #egg3 { top: 180px; right: -12px; transform: rotate(-8deg); opacity: 0.22; }

    .field {
      margin: 24px 0;
      display: flex;
      flex-wrap: wrap;
      align-items: center;
      gap: 16px;
    }

    label {
      flex: 1 0 340px;
      font-weight: 500;
      color: var(--text-light);
      font-size: 1.05rem;
    }

    input[type="text"],
    input[type="number"] {
      flex: 0 0 190px;
      padding: 11px 16px;
      font-size: 1.08rem;
      font-family: 'Courier New', monospace;
      background: rgba(255,248,235,0.75);
      border: 1px solid #d4b37f;
      border-radius: 10px;
      color: #2d1e12;
      transition: all 0.18s;
    }

    input:focus {
      outline: none;
      border-color: var(--gold);
      box-shadow: 0 0 0 4px var(--egg-glow);
      background: white;
    }

    button {
      margin: 40px auto 20px;
      display: block;
      padding: 16px 56px;
      font-family: 'Cinzel', serif;
      font-size: 1.22rem;
      font-weight: 600;
      color: white;
      background: linear-gradient(90deg, #b8860b, #d4a017, #e9c46a);
      background-size: 200% 100%;
      border: none;
      border-radius: 12px;
      cursor: pointer;
      box-shadow: 0 6px 20px rgba(180,140,40,0.5);
      transition: all 0.25s;
    }

    button:hover {
      background-position: 100% 0;
      transform: translateY(-3px) scale(1.04);
      box-shadow: 0 12px 32px rgba(212,160,23,0.6);
    }

    .output {
      margin-top: 36px;
      padding: 28px;
      background: rgba(248,241,233,0.65);
      border: 1px solid #d4b37f;
      border-radius: 14px;
      backdrop-filter: blur(4px);
      line-height: 1.7;
      display: none;
    }

    .output strong {
      display: inline-block;
      width: 250px;
      color: #8b6f47;
      font-family: 'Cinzel', serif;
      font-weight: 600;
    }

    .variant {
      margin: 12px 0 12px 28px;
      padding-left: 18px;
      border-left: 3px solid var(--gold);
      font-family: monospace;
      color: #3d2a12;
    }

    .distance {
      margin-top: 32px;
      padding-top: 20px;
      border-top: 1px dashed #c9a87c;
      font-weight: 600;
      color: #a67c00;
      font-size: 1.1rem;
    }

    .note, .help {
      margin-top: 28px;
      font-size: 0.96rem;
      color: #5c4033;
      line-height: 1.6;
    }

    .help strong {
      color: #8b6f47;
    }

    .error {
      color: #9b2d30;
      font-weight: 600;
    }

    @media (max-width: 580px) {
      .field { flex-direction: column; align-items: stretch; }
      label, input { width: 100%; flex: none; }
      input { margin-top: 10px; }
    }
  </style>
</head>
<body>

<div class="container">
  <header>
    <h2>Compute the running time between any pair of cities</h2>
  </header>

  <div class="content">
  
  <!-- â”€â”€ NEW: Name inputs â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
  <div style="margin-bottom: 32px; padding: 20px; background: rgba(212,160,23,0.08); border-radius: 12px; border: 1px solid rgba(212,160,23,0.25);">
    <h3 style="margin: 0 0 20px 0; color: var(--gold); font-size: 1.4rem;">Location Names</h3>
    
    We need to have at least two cities (best three) to measure relative travel times. They should have all the same speed   modifiers.
    <div class="field">
      <label>First reference city name:</label>
      <input type="text" id="name1" value="City 1" placeholder="e.g. Rome, Sparta, ...">
    </div>
    
    <div class="field">
      <label>Second reference city name:</label>
      <input type="text" id="name2" value="City 2" placeholder="e.g. Athens, Troy, ...">
    </div>
    
    <div class="field">
      <label>Target location A name:</label>
      <input type="text" id="nameA" value="City A" placeholder="e.g. Byzantium, Carthage, ...">
    </div>
    
    <div class="field">
      <label>Target location B name:</label>
      <input type="text" id="nameB" value="City B" placeholder="e.g. Alexandria, Jerusalem, ...">
    </div>
  </div>
  <!-- â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->

    <div class="egg-deco" id="egg1">ðŸ¥š</div>
    <div class="egg-deco" id="egg2">âœ§ðŸ¥š</div>
    <div class="egg-deco" id="egg3">ðŸ¥š</div>

    <div class="field">
      <label>Server speed:</label>
      <input type="number" id="speed" value="2" step="any" min="0.01">
    </div>

    <div class="field">
    <label>Time <span id="lblName1">City 1</span> â†’ <span id="lblName2">City 2</span> (hh:mm:ss):</label>
    <input type="text" id="t1t2" value="06:21:14" placeholder="hh:mm:ss">
  </div>

  <div class="field">
    <label>Time <span id="lblName1a">City 1</span> â†’ <span id="lblNameA_a">City A</span> (hh:mm:ss for Kolo):</label>
    <input type="text" id="t1A" value="05:56:38" placeholder="hh:mm:ss">
  </div>

  <div class="field">
    <label>Time <span id="lblName2a">City 2</span> â†’ <span id="lblNameA_b">City A</span> (hh:mm:ss for Kolo):</label>
    <input type="text" id="t2A" value="03:25:59" placeholder="hh:mm:ss">
  </div>

  <div class="field">
    <label>Time <span id="lblName1b">City 1</span> â†’ <span id="lblNameB_a">City B</span> (hh:mm:ss for Kolo):</label>
    <input type="text" id="t1B" value="03:12:07" placeholder="hh:mm:ss">
  </div>

  <div class="field">
    <label>Time <span id="lblName2b">City 2</span> â†’ <span id="lblNameB_b">City B</span> (hh:mm:ss for Kolo):</label>
    <input type="text" id="t2B" value="05:28:38" placeholder="hh:mm:ss">
  </div>

    <button onclick="calculate()">Calculate positions</button>

<div class="output" id="result">
    <div><strong><span id="outLblA">City A</span> coordinates:</strong></div>
    <div id="outA1" class="variant"></div>
    <div id="outA2" class="variant"></div>

    <div style="margin: 32px 0 14px 0;"><strong><span id="outLblB">City B</span> coordinates:</strong></div>
    <div id="outB1" class="variant"></div>
    <div id="outB2" class="variant"></div>

    <div class="distance">
      <strong>Possible travel times <span id="distLblA">City A</span> â†” <span id="distLblB">City B</span>:</strong><br>
      <div id="dist1"></div>
      <div id="dist2"></div>
    </div>

    <div class="note">
      First reference city (<span id="noteName1">City 1</span>) at <strong>(0, 0)</strong><br>
      Second reference city (<span id="noteName2">City 2</span>) at <strong>(<span id="dist_between_ref_cities"></span>, 0)</strong><br>
      Coordinates in units = seconds âˆ’ Ruestzeit for Kolo
    </div>
  </div>

    <div class="help">
      <strong>Input format examples:</strong><br>
      â€¢ 02:30:45<br>
      â€¢ 1:15:00<br>
      â€¢ 45:30<br>
      â€¢ 0:03:12.5<br>
      â€¢ 3661 (treated as seconds)
    </div>

  </div>
</div>

<script>
// Live name updating
function updateNames() {
  const names = {
    n1:  document.getElementById('name1').value.trim() || 'City 1',
    n2:  document.getElementById('name2').value.trim() || 'City 2',
    nA:  document.getElementById('nameA').value.trim() || 'City A',
    nB:  document.getElementById('nameB').value.trim() || 'City B'
  };

  // Input labels
  document.getElementById('lblName1').textContent  = names.n1;
  document.getElementById('lblName2').textContent  = names.n2;
  document.getElementById('lblName1a').textContent = names.n1;
  document.getElementById('lblName2a').textContent = names.n2;
  document.getElementById('lblName1b').textContent = names.n1;
  document.getElementById('lblName2b').textContent = names.n2;
  
  document.getElementById('lblNameA_a').textContent = names.nA;
  document.getElementById('lblNameA_b').textContent = names.nA;
  document.getElementById('lblNameB_a').textContent = names.nB;
  document.getElementById('lblNameB_b').textContent = names.nB;

  // Output labels
  document.getElementById('outLblA').textContent  = names.nA;
  document.getElementById('outLblB').textContent  = names.nB;
  document.getElementById('distLblA').textContent = names.nA;
  document.getElementById('distLblB').textContent = names.nB;

  // Note at bottom
  document.getElementById('noteName1').textContent = names.n1;
  document.getElementById('noteName2').textContent = names.n2;
}

// Attach listeners
['name1','name2','nameA','nameB'].forEach(id => {
  document.getElementById(id).addEventListener('input', updateNames);
  document.getElementById(id).addEventListener('change', updateNames);
});

// Run once on load
window.addEventListener('DOMContentLoaded', updateNames);
// ----------------------------------------------------------------------
// Your original JavaScript remains 100% unchanged â€” just paste it here
function parseHMS(input) {
    if (!input || typeof input !== 'string') return NaN;

    // Remove whitespace
    input = input.trim();

    // Case 1: already just seconds (e.g. "3661" or "45.5")
    if (/^[\d.]+$/.test(input)) {
        const num = parseFloat(input);
        return isNaN(num) ? NaN : num;
    }

    // Case 2: hh:mm:ss or h:mm:ss or mm:ss or h:mm or even just mm
    // Allowed separators: : or .
    const parts = input.split(/[:.]/).map(p => p.trim());

    let hours = 0;
    let minutes = 0;
    let seconds = 0;

    if (parts.length === 1) {
        // just seconds (already handled above)
        return parseFloat(parts[0]);
    }
    else if (parts.length === 2) {
        // mm:ss
        minutes = parseInt(parts[0], 10) || 0;
        seconds = parseFloat(parts[1]) || 0;
    }
    else if (parts.length === 3) {
        // hh:mm:ss
        hours   = parseInt(parts[0], 10) || 0;
        minutes = parseInt(parts[1], 10) || 0;
        seconds = parseFloat(parts[2]) || 0;
    }
    else {
        return NaN;
    }

    if (minutes > 59 || seconds >= 60 || hours < 0 || minutes < 0 || seconds < 0) {
        return NaN;
    }

    return hours * 3600 + minutes * 60 + seconds;
}
function toHMS(totalSeconds) {
    if (typeof totalSeconds !== 'number' || isNaN(totalSeconds) || totalSeconds < 0) {
        return "â€”";
    }

    const hours   = Math.floor(totalSeconds / 3600);
    const minutes = Math.floor((totalSeconds % 3600) / 60);
    const seconds = totalSeconds % 60;

    // Format with leading zeros
    const h = String(hours).padStart(2, '0');
    const m = String(minutes).padStart(2, '0');
    const s = seconds.toFixed(1).replace(/\.0$/, '');  // remove .0 if integer

    if (hours > 0) {
        return `${h}:${m}:${s.padStart(2, '0')}`;
    } else if (minutes > 0 || seconds >= 1) {
        return `${m}:${s.padStart(2, '0')}`;
    } else {
        return s;
    }
}
function calculate() {
   const speed = parseFloat(document.getElementById('speed').value);
   let ruestzeit = 900/speed;
   let pos1 = { x: 0, y: 0 };   // First reference city â€“ always (0,0)
   let pos2 = { x: 0, y: 0 };

   speeds = {
        "Bireme": 45,
        "Transe": 24,
        "Tireme": 45,
        "Kolo": 9,
        "Feuerschiff": 39,
        "Brander": 15
   }
   
   // Parse all travel times (use your existing parseHMS function)
   const t1t2_sec = parseHMS(document.getElementById('t1t2').value);
   const t1A_sec  = parseHMS(document.getElementById('t1A').value);
   const t2A_sec  = parseHMS(document.getElementById('t2A').value);
   const t1B_sec  = parseHMS(document.getElementById('t1B').value);
   const t2B_sec  = parseHMS(document.getElementById('t2B').value);
   
   // â”€â”€ 2. Calculate effective travel times (subtract ruestzeit) â”€â”€
    const d1t2 = t1t2_sec - ruestzeit;   // effective seconds between city 1 â†” city 2
    const d1A  = t1A_sec  - ruestzeit;
    const d2A  = t2A_sec  - ruestzeit;
    const d1B  = t1B_sec  - ruestzeit;
    const d2B  = t2B_sec  - ruestzeit;

    // â”€â”€ 3. Set reference positions â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    pos1 = { x: 0, y: 0 };                      // City 1 / first reference
    pos2 = { x: d1t2, y: 0 };           // City 2 / second reference (on x-axis)

    // Distance between reference cities (just for reference / checks)
    const dist12 = pos2.x - pos1.x;             // should be â‰ˆ speed * (t1t2 - ruestzeit)

    // â”€â”€ 4. Calculate coordinates of A and B â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    // We solve the system of circles (trilateration in 2D with two points)
    // A is at distance d1A from pos1 and d2A from pos2

    const xA_num = (d1A*d1A - d2A*d2A + dist12*dist12) / (2 * dist12);
    const xA = xA_num;
    const hA = Math.sqrt(d1A*d1A - xA*xA);   // height = Â±âˆš(...)
    const yA_plus  = hA;
    const yA_minus = -hA;

    // Same for B
    const xB_num = (d1B*d1B - d2B*d2B + dist12*dist12) / (2 * dist12);
    const xB = xB_num;
    const hB = Math.sqrt(d1B*d1B - xB*xB);
    const yB_plus  = hB;
    const yB_minus = -hB;

    // â”€â”€ 5. Output â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    const nameA = document.getElementById('nameA').value.trim() || "City A";
    const nameB = document.getElementById('nameB').value.trim() || "City B";

    document.getElementById('outA1').textContent = `${nameA}:  (${xA.toFixed(4)},  ${yA_plus.toFixed(4)})`;
    document.getElementById('outA2').textContent = `${nameA}:  (${xA.toFixed(4)}, ${yA_minus.toFixed(4)})`;

    document.getElementById('outB1').textContent = `${nameB}:  (${xB.toFixed(4)},  ${yB_plus.toFixed(4)})`;
    document.getElementById('outB2').textContent = `${nameB}:  (${xB.toFixed(4)}, ${yB_minus.toFixed(4)})`;

    // Optional: show distance between ref cities
    document.getElementById('dist1').textContent = 
        `Reference cities distance = ${dist12.toFixed(0)} units ` +
        `(travel time ${toHMS(t1t2_sec)} = effective ${toHMS(d1t2)} after ruestzeit)`;

    // Show possible Aâ†”B travel times
    const distAB_plus = Math.hypot(xB - xA, hB + hA);
    const distAB_minus = Math.hypot(xB - xA, hB - hA);
    const timeAB_plus  = distAB_plus + ruestzeit;
    const timeAB_minus = distAB_minus + ruestzeit;
    const timeAB_plus_Transe = Math.round(distAB_plus*speeds["Kolo"]/speeds["Transe"] + ruestzeit)
    const timeAB_plus_FS = Math.round(distAB_plus*speeds["Kolo"]/speeds["Feuerschiff"] + ruestzeit)
    const timeAB_plus_Bimse = Math.round(distAB_plus*speeds["Kolo"]/speeds["Bireme"] + ruestzeit)
    
    const timeAB_minus_Transe = Math.round(distAB_minus*speeds["Kolo"]/speeds["Transe"] + ruestzeit)
    const timeAB_minus_FS = Math.round(distAB_minus*speeds["Kolo"]/speeds["Feuerschiff"] + ruestzeit)
    const timeAB_minus_Bimse = Math.round(distAB_minus*speeds["Kolo"]/speeds["Bireme"] + ruestzeit)

    document.getElementById('dist1').textContent = 
        ` ${nameA} â†” ${nameB}: Kolo: ${toHMS(timeAB_plus)}, Transe: ${toHMS(timeAB_plus_Transe)}, FS: ${toHMS(timeAB_plus_FS)}, Bireme: ${toHMS(timeAB_plus_Bimse)} (both above the line)`;
    document.getElementById('dist2').textContent = 
        ` ${nameA} â†” ${nameB}: Kolo: ${toHMS(timeAB_minus)}, Transe: ${toHMS(timeAB_minus_Transe)}, FS: ${toHMS(timeAB_minus_FS)}, Bireme: ${toHMS(timeAB_minus_Bimse)}  (one below, one above)`;
        
    document.getElementById('dist_between_ref_cities').textContent = `${t1t2_sec}`;

    document.getElementById('result').style.display = 'block';
}
</script>

</body>
</html>
